<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather API</title>
  </head>
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      const yql_api = "http://query.yahooapis.com/v1/public/yql?";
      const api_key = "0b07585b132d23a8c2131a461d457f6e";

      let city = "New York City";
      let params = {
        q: city,
        appid: api_key,
      };
      let query = new URLSearchParams(params).toString()
      api_key.search = query

      fetch("city.list.json")
      .then(resp => resp.json())
      .then(resp => {
          console.log(resp[0].country)
          let cities = resp.filter((city, index) => {
              if (index === 101) return
              else return city.state === "NY"
          })
          let first_cities = cities.slice(0,100)
          console.log(first_cities)
      })

      fetch(
        `https://api.openweathermap.org/data/2.5/weather?${query}`
      )
        .then((data) => data.json())
        .then((response) => console.log(response));
    </script>
  </body>
</html>
